<div class="container">
  <h4>Áreas</h4>

  <% if @areas != nil %>
    <table class="table table-condensed index">
      <thead>
        <tr>
          <th>Unidade</th>
          <th>Área</th>
          <th>Subárea</th>
          <th>Tipo</th>
          <th class="text-center">Situação</th>
          <th></th>
        </tr>
      </thead>

      <tbody>
      <% @areas.sort_by{ |area| area[:unidade_id] }.each do |area| %>
        <% area.confirmada = true %>
        <% mensagem = area.valid? ? "Confirmada" : "Pendências" %>
        <tr class="<%= area.valid? ? "alert-success" : "alert-danger" %>">
          <td><%= area.unidade.sigla %></td>
          <td><%= area.nome %></td>
          <td><%= area.subarea %></td>
          <td><%= area.tipo == 'concurso' ? 'Concurso Público' : 'Processo Seletivo Simplificado' %></td>
          <td class="text-center">
            <span class="<%= area.valid? ? "glyphicon glyphicon-ok-sign" : "glyphicon glyphicon-exclamation-sign" %>"></span> <%= mensagem %>
          </td>
          <td>
            <% if !area.valid? || current_user.pode_criar_edital? %>
              <%= link_to edit_area_path(area), class: "btn btn-primary" do %>
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar
              <% end %>
            <% end %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  <% else %>
    Nada!
  <% end %>
  <%= link_to new_area_path, class: "btn btn-success" do %>
    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Nova Área
  <% end %>
</div>
